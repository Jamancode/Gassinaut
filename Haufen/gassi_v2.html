<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêï Meine Gassi-App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            animation: slideDown 0.8s ease-out;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .nav-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .tab-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .tab-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            background: #667eea;
            color: white;
        }

        .tab-btn.active {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }

        .tab-content {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.5s ease-in;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn.delete {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            padding: 8px 16px;
            font-size: 12px;
            margin-left: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 20px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-day {
            aspect-ratio: 1;
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            min-height: 40px;
        }

        .calendar-day:hover {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }

        .calendar-day.has-walk {
            background: #28a745;
            color: white;
        }

        .calendar-day.today {
            background: #ffc107;
            font-weight: bold;
        }

        .calendar-day.header {
            background: #667eea;
            color: white;
            font-weight: bold;
            cursor: default;
        }

        .calendar-day.header:hover {
            transform: none;
        }

        .walk-entry {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
        }

        .walk-entry:hover {
            transform: translateX(10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            background: #e0e0e0;
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            border-radius: 10px;
            transition: width 0.8s ease;
        }

        .tip-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .tip-card:hover {
            transform: translateY(-5px);
        }

        .tip-card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from { opacity: 0; transform: scale(0.7); }
            to { opacity: 1; transform: scale(1); }
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #667eea;
        }

        .floating-add {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .floating-add:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2em;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .nav-tabs {
                flex-direction: column;
            }
        }

        .achievement-badge {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            display: inline-block;
            margin: 5px;
            box-shadow: 0 3px 10px rgba(255, 215, 0, 0.3);
        }

        .weather-widget {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .range-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .range-container input[type="range"] {
            flex: 1;
        }

        #progressDisplay {
            font-weight: bold;
            color: #667eea;
            min-width: 50px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üêï Meine Gassi-App</h1>
            <p>Verwalte deine Hundespazierg√§nge mit Stil und Freude!</p>
        </div>

        <div class="nav-tabs">
            <button class="tab-btn active" onclick="showTab('dashboard')">üìä Dashboard</button>
            <button class="tab-btn" onclick="showTab('walk-tracker')">üö∂ Gassi Tracker</button>
            <button class="tab-btn" onclick="showTab('calendar')">üìÖ Kalender</button>
            <button class="tab-btn" onclick="showTab('training')">üéì Training</button>
            <button class="tab-btn" onclick="showTab('tips')">üí° Tipps</button>
            <button class="tab-btn" onclick="showTab('memories')">üì∏ Erinnerungen</button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="weather-widget">
                <h3>üå§Ô∏è Wetter heute</h3>
                <p>Perfektes Wetter f√ºr einen Spaziergang! 18¬∞C, leicht bew√∂lkt</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalWalks">0</div>
                    <div>Gesamte Spazierg√§nge</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalDistance">0</div>
                    <div>Kilometer gelaufen</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalTime">0</div>
                    <div>Stunden drau√üen</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="weekStreak">0</div>
                    <div>Tage in Folge</div>
                </div>
            </div>

            <h3>üèÜ Erfolge</h3>
            <div id="achievements"></div>

            <h3>üìà Letzte Spazierg√§nge</h3>
            <div id="recentWalks"></div>
        </div>

        <!-- Walk Tracker Tab -->
        <div id="walk-tracker" class="tab-content">
            <h2>üö∂ Neuen Spaziergang erfassen</h2>
            <form id="walkForm">
                <div class="form-group">
                    <label for="walkDate">Datum:</label>
                    <input type="date" id="walkDate" required>
                </div>
                <div class="form-group">
                    <label for="walkTime">Startzeit:</label>
                    <input type="time" id="walkTime" required>
                </div>
                <div class="form-group">
                    <label for="walkDuration">Dauer (Minuten):</label>
                    <input type="number" id="walkDuration" min="1" placeholder="30" required>
                </div>
                <div class="form-group">
                    <label for="walkDistance">Entfernung (km):</label>
                    <input type="number" id="walkDistance" step="0.1" min="0.1" placeholder="2.5" required>
                </div>
                <div class="form-group">
                    <label for="walkPauses">Anzahl Pausen:</label>
                    <input type="number" id="walkPauses" min="0" placeholder="2">
                </div>
                <div class="form-group">
                    <label for="walkRoute">Route/Ort:</label>
                    <input type="text" id="walkRoute" placeholder="Park am See">
                </div>
                <div class="form-group">
                    <label for="walkWeather">Wetter:</label>
                    <select id="walkWeather">
                        <option value="sonnig">‚òÄÔ∏è Sonnig</option>
                        <option value="bew√∂lkt">‚òÅÔ∏è Bew√∂lkt</option>
                        <option value="regnerisch">üåßÔ∏è Regnerisch</option>
                        <option value="windig">üí® Windig</option>
                        <option value="schnee">‚ùÑÔ∏è Schnee</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="dogMood">Stimmung des Hundes:</label>
                    <select id="dogMood">
                        <option value="sehr-gut">üòä Sehr gut</option>
                        <option value="gut">üôÇ Gut</option>
                        <option value="normal">üòê Normal</option>
                        <option value="m√ºde">üò¥ M√ºde</option>
                        <option value="unruhig">üò∞ Unruhig</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="walkNotes">Notizen:</label>
                    <textarea id="walkNotes" rows="3" placeholder="Besondere Ereignisse, getroffen Hunde, etc."></textarea>
                </div>
                <button type="submit" class="btn">üìù Spaziergang speichern</button>
            </form>
        </div>

        <!-- Calendar Tab -->
        <div id="calendar" class="tab-content">
            <h2>üìÖ Gassi-Kalender 2025</h2>
            <div id="calendar-container">
                <div class="calendar-header">
                    <button class="btn" onclick="prevMonth()">&lt;</button>
                    <h3 id="currentMonth">Juni 2025</h3>
                    <button class="btn" onclick="nextMonth()">&gt;</button>
                </div>
                <div class="calendar" id="calendar-grid"></div>
            </div>

            <h3>üéØ Geplante Events</h3>
            <div id="events">
                <div class="walk-entry">
                    <strong>Tierarztbesuch</strong> - 15. Juni<br>
                    <small>Impfung auffrischen</small>
                </div>
                <div class="walk-entry">
                    <strong>Hundeschule</strong> - Jeden Samstag<br>
                    <small>Training mit anderen Hunden</small>
                </div>
            </div>
        </div>

        <!-- Training Tab -->
        <div id="training" class="tab-content">
            <h2>üéì Trainingsfortschritt</h2>

            <div class="form-group">
                <label for="newSkill">Neue F√§higkeit hinzuf√ºgen:</label>
                <input type="text" id="newSkill" placeholder="z.B. Sitz, Platz, Bei Fu√ü">
                <button class="btn" onclick="addSkill()">‚ûï Hinzuf√ºgen</button>
            </div>

            <div id="skillsList"></div>

            <h3>üìö Trainingsnotizen</h3>
            <textarea id="trainingNotes" rows="4" placeholder="Notizen zu den heutigen Trainingseinheiten..."></textarea>
            <button class="btn" onclick="saveTrainingNotes()">üíæ Notizen speichern</button>
        </div>

        <!-- Tips Tab -->
        <div id="tips" class="tab-content">
            <h2>üí° Hundef√ºhrung & Tipps</h2>

            <div class="tip-card">
                <h3>üéØ Grundlagen der Hundef√ºhrung</h3>
                <p><strong>Konsistenz ist der Schl√ºssel:</strong> Verwende immer die gleichen Kommandos und belohne konsequent gutes Verhalten. Dein Hund lernt durch Wiederholung und positive Verst√§rkung.</p>
            </div>

            <div class="tip-card">
                <h3>üö∂ Perfekte Gassi-Runde</h3>
                <p><strong>Abwechslung macht Spa√ü:</strong> Variiere die Routen, lass deinen Hund schn√ºffeln und erkunden. Plane Pausen ein und achte auf die K√∂rpersprache deines Hundes.</p>
            </div>

            <div class="tip-card">
                <h3>üèÉ Leinenf√ºhrigkeit</h3>
                <p><strong>Schritt f√ºr Schritt:</strong> Beginne in ruhiger Umgebung, belohne wenn der Hund neben dir l√§uft, stoppe bei Ziehen und gehe erst weiter wenn die Leine locker ist.</p>
            </div>

            <div class="tip-card">
                <h3>üåü Positive Verst√§rkung</h3>
                <p><strong>Timing ist alles:</strong> Belohne gew√ºnschtes Verhalten sofort mit Leckerlis, Lob oder Spielzeit. Ignoriere unerw√ºnschtes Verhalten, anstatt zu schimpfen.</p>
            </div>

            <div class="tip-card">
                <h3>üßò Entspannungstechniken</h3>
                <p><strong>Ruhe bewahren:</strong> Deine Energie √ºbertr√§gt sich auf deinen Hund. Bleibe ruhig und geduldig, besonders in stressigen Situationen.</p>
            </div>

            <div class="tip-card">
                <h3>üéÆ Mentale Stimulation</h3>
                <p><strong>Denksport f√ºr Hunde:</strong> Verstecke Leckerlis, verwende Schn√ºffelmatten oder Intelligenzspielzeug. Ein m√ºder Kopf ist genauso wichtig wie ein m√ºder K√∂rper.</p>
            </div>
        </div>

        <!-- Memories Tab -->
        <div id="memories" class="tab-content">
            <h2>üì∏ Erinnerungen & Erlebnisse</h2>

            <div class="form-group">
                <label for="memoryTitle">Titel des Erlebnisses:</label>
                <input type="text" id="memoryTitle" placeholder="Unser erster Strandbesuch">
            </div>

            <div class="form-group">
                <label for="memoryDate">Datum:</label>
                <input type="date" id="memoryDate">
            </div>

            <div class="form-group">
                <label for="memoryDescription">Beschreibung:</label>
                <textarea id="memoryDescription" rows="4" placeholder="Erz√§hle von eurem gemeinsamen Erlebnis..."></textarea>
            </div>

            <button class="btn" onclick="addMemory()">üíæ Erinnerung speichern</button>

            <h3>üìñ Gespeicherte Erinnerungen</h3>
            <div id="memoriesList"></div>
        </div>
    </div>

    <!-- Floating Add Button -->
    <div class="floating-add" onclick="showTab('walk-tracker')" title="Neuen Spaziergang hinzuf√ºgen">
        ‚ûï
    </div>

    <!-- Modal for Progress Update -->
    <div id="progressModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h3>Trainingsfortschritt aktualisieren</h3>
            <div class="form-group">
                <label for="progressValue">Fortschritt (0-100%):</label>
                <div class="range-container">
                    <input type="range" id="progressValue" min="0" max="100" value="50">
                    <span id="progressDisplay">50%</span>
                </div>
            </div>
            <div class="form-group">
                <label for="progressNote">Notiz:</label>
                <textarea id="progressNote" rows="2" placeholder="Wie lief das Training heute?"></textarea>
            </div>
            <button class="btn" onclick="saveProgress()">üíæ Speichern</button>
        </div>
    </div>

    <script>
        // Gassi-App JavaScript - Vollst√§ndige Implementierung

        // Globale Variablen
        let currentDate = new Date();
        let currentSkillId = null;

        // App-Zustand
        const AppState = {
            walks: JSON.parse(localStorage.getItem('gassi-walks') || '[]'),
            skills: JSON.parse(localStorage.getItem('gassi-skills') || '[]'),
            memories: JSON.parse(localStorage.getItem('gassi-memories') || '[]'),
            trainingNotes: localStorage.getItem('gassi-training-notes') || ''
        };

        // Initialisierung beim Laden der Seite
        document.addEventListener('DOMContentLoaded', function() {
            // Aktuelles Datum setzen
            document.getElementById('walkDate').value = formatDateForInput(new Date());
            document.getElementById('walkTime').value = getCurrentTime();
            document.getElementById('memoryDate').value = formatDateForInput(new Date());

            // Standard-Skills hinzuf√ºgen falls keine vorhanden
            if (AppState.skills.length === 0) {
                AppState.skills = [
                    { id: 'sitz', name: 'Sitz ü™ë', progress: 80, notes: 'Klappt fast immer!' },
                    { id: 'platz', name: 'Platz üõå', progress: 60, notes: 'Braucht noch √úbung' },
                    { id: 'beifuss', name: 'Bei Fu√ü üë´', progress: 40, notes: 'Anf√§ngerstadium' }
                ];
                saveData();
            }

            // Default-Erinnerungen hinzuf√ºgen falls keine vorhanden
            if (AppState.memories.length === 0) {
                AppState.memories = [
                    {
                        id: 1,
                        title: 'üèñÔ∏è Erster Strandbesuch',
                        date: '2025-06-05',
                        description: 'Heute waren wir das erste Mal am Strand. Bella war anfangs etwas unsicher wegen der Wellen, aber nach ein paar Minuten hat sie das Wasser geliebt! Sie ist sogar ein bisschen geschwommen.'
                    },
                    {
                        id: 2,
                        title: 'üêï Neuer Hundefreund',
                        date: '2025-06-03',
                        description: 'Im Park haben wir Max getroffen, einen Golden Retriever. Die beiden haben sich sofort verstanden und eine halbe Stunde gespielt. Bella war danach richtig gl√ºcklich und m√ºde.'
                    }
                ];
                saveData();
            }

            // UI initialisieren
            updateStats();
            updateRecentWalks();
            updateCalendar();
            updateSkills();
            updateMemories();
            loadTrainingNotes();

            // Progress Slider Event
            document.getElementById('progressValue').addEventListener('input', function() {
                document.getElementById('progressDisplay').textContent = this.value + '%';
            });
        });

        // Tab-Navigation
        function showTab(tabName) {
            // Alle Tabs ausblenden
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Alle Buttons deaktivieren
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));

            // Gew√§hlten Tab anzeigen
            document.getElementById(tabName).classList.add('active');

            // Button aktivieren
            event.target.classList.add('active');

            // Kalender aktualisieren wenn Kalender-Tab ge√∂ffnet wird
            if (tabName === 'calendar') {
                updateCalendar();
            }
        }

        // Utility-Funktionen
        function formatDateForInput(date) {
            return date.toISOString().split('T')[0];
        }

        function getCurrentTime() {
            const now = new Date();
            return now.toTimeString().slice(0, 5);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('de-DE', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
        }

        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        // Daten speichern
        function saveData() {
            localStorage.setItem('gassi-walks', JSON.stringify(AppState.walks));
            localStorage.setItem('gassi-skills', JSON.stringify(AppState.skills));
            localStorage.setItem('gassi-memories', JSON.stringify(AppState.memories));
            localStorage.setItem('gassi-training-notes', AppState.trainingNotes);
        }

        // Spaziergang hinzuf√ºgen
        document.getElementById('walkForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const walk = {
                id: generateId(),
                date: document.getElementById('walkDate').value,
                time: document.getElementById('walkTime').value,
                duration: parseInt(document.getElementById('walkDuration').value),
                distance: parseFloat(document.getElementById('walkDistance').value),
                pauses: parseInt(document.getElementById('walkPauses').value) || 0,
                route: document.getElementById('walkRoute').value,
                weather: document.getElementById('walkWeather').value,
                dogMood: document.getElementById('dogMood').value,
                notes: document.getElementById('walkNotes').value
            };

            AppState.walks.push(walk);
            AppState.walks.sort((a, b) => new Date(b.date + 'T' + b.time) - new Date(a.date + 'T' + a.time));

            saveData();
            updateStats();
            updateRecentWalks();
            updateCalendar();

            // Formular zur√ºcksetzen
            document.getElementById('walkForm').reset();
            document.getElementById('walkDate').value = formatDateForInput(new Date());
            document.getElementById('walkTime').value = getCurrentTime();

            // Zur Dashboard wechseln
            showTab('dashboard');

            // Success-Animation (optional)
            alert('üéâ Spaziergang erfolgreich gespeichert!');
        });

        // Statistiken aktualisieren
        function updateStats() {
            const totalWalks = AppState.walks.length;
            const totalDistance = AppState.walks.reduce((sum, walk) => sum + walk.distance, 0);
            const totalTime = AppState.walks.reduce((sum, walk) => sum + walk.duration, 0);

            // Streak berechnen (aufeinanderfolgende Tage mit Spazierg√§ngen)
            const streak = calculateStreak();

            document.getElementById('totalWalks').textContent = totalWalks;
            document.getElementById('totalDistance').textContent = totalDistance.toFixed(1);
            document.getElementById('totalTime').textContent = Math.round(totalTime / 60);
            document.getElementById('weekStreak').textContent = streak;

            updateAchievements(totalWalks, totalDistance, totalTime);
        }

        // Streak berechnen
        function calculateStreak() {
            if (AppState.walks.length === 0) return 0;

            const dates = [...new Set(AppState.walks.map(walk => walk.date))].sort().reverse();
            let streak = 0;
            let currentDate = new Date();

            for (let date of dates) {
                const walkDate = new Date(date);
                const diffDays = Math.floor((currentDate - walkDate) / (1000 * 60 * 60 * 24));

                if (diffDays === streak) {
                    streak++;
                } else if (diffDays === streak + 1 && streak === 0) {
                    streak++;
                } else {
                    break;
                }
            }

            return streak;
        }

        // Erfolge aktualisieren
        function updateAchievements(totalWalks, totalDistance, totalTime) {
            const achievements = [];

            if (totalWalks >= 1) achievements.push('ü•á Erster Spaziergang');
            if (totalWalks >= 10) achievements.push('üåü 10 Spazierg√§nge');
            if (totalWalks >= 50) achievements.push('üèÜ 50 Spazierg√§nge');
            if (totalWalks >= 100) achievements.push('üëë 100 Spazierg√§nge');

            if (totalDistance >= 10) achievements.push('üöÄ 10km gelaufen');
            if (totalDistance >= 50) achievements.push('‚≠ê 50km gelaufen');
            if (totalDistance >= 100) achievements.push('üåü 100km gelaufen');

            if (totalTime >= 600) achievements.push('‚è∞ 10 Stunden drau√üen');
            if (totalTime >= 3000) achievements.push('üïê 50 Stunden drau√üen');

            const streak = calculateStreak();
            if (streak >= 7) achievements.push('üî• 7 Tage in Folge');
            if (streak >= 30) achievements.push('üí™ 30 Tage in Folge');

            document.getElementById('achievements').innerHTML = achievements
                .map(achievement => `<span class="achievement-badge">${achievement}</span>`)
                .join('');
        }

        // Letzte Spazierg√§nge anzeigen
        function updateRecentWalks() {
            const recentWalks = AppState.walks.slice(0, 5);
            const container = document.getElementById('recentWalks');

            if (recentWalks.length === 0) {
                container.innerHTML = '<p>Noch keine Spazierg√§nge erfasst. Starte mit dem ersten Spaziergang!</p>';
                return;
            }

            container.innerHTML = recentWalks.map(walk => `
                <div class="walk-entry">
                    <strong>${formatDate(walk.date)} um ${walk.time}</strong>
                    <button class="btn delete" onclick="deleteWalk('${walk.id}')">üóëÔ∏è L√∂schen</button>
                    <br>
                    <small>üìç ${walk.route || 'Keine Route angegeben'} ‚Ä¢ üö∂ ${walk.distance}km ‚Ä¢ ‚è±Ô∏è ${walk.duration}min ‚Ä¢ ${getWeatherEmoji(walk.weather)}</small>
                    ${walk.notes ? `<p>${walk.notes}</p>` : ''}
                </div>
            `).join('');
        }

        // Wetter-Emoji zur√ºckgeben
        function getWeatherEmoji(weather) {
            const weatherEmojis = {
                'sonnig': '‚òÄÔ∏è',
                'bew√∂lkt': '‚òÅÔ∏è',
                'regnerisch': 'üåßÔ∏è',
                'windig': 'üí®',
                'schnee': '‚ùÑÔ∏è'
            };
            return weatherEmojis[weather] || 'üå§Ô∏è';
        }

        // Spaziergang l√∂schen
        function deleteWalk(walkId) {
            if (confirm('M√∂chtest du diesen Spaziergang wirklich l√∂schen?')) {
                AppState.walks = AppState.walks.filter(walk => walk.id !== walkId);
                saveData();
                updateStats();
                updateRecentWalks();
                updateCalendar();
            }
        }

        // Kalender-Funktionen
        function updateCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();

            document.getElementById('currentMonth').textContent =
                new Intl.DateTimeFormat('de-DE', { month: 'long', year: 'numeric' }).format(currentDate);

            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDay = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1; // Montag = 0

            const calendarGrid = document.getElementById('calendar-grid');
            calendarGrid.innerHTML = '';

            // Wochentage-Header
            const weekDays = ['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So'];
            weekDays.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day header';
                dayElement.textContent = day;
                calendarGrid.appendChild(dayElement);
            });

            // Leere Zellen am Anfang
            for (let i = 0; i < startDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day';
                calendarGrid.appendChild(emptyDay);
            }

            // Tage des Monats
            for (let day = 1; day <= lastDay.getDate(); day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;

                const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const hasWalk = AppState.walks.some(walk => walk.date === dateString);

                if (hasWalk) {
                    dayElement.classList.add('has-walk');
                }

                // Heute markieren
                const today = new Date();
                if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
                    dayElement.classList.add('today');
                }

                dayElement.addEventListener('click', () => showDayDetails(dateString));
                calendarGrid.appendChild(dayElement);
            }
        }

        function prevMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            updateCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            updateCalendar();
        }

        function showDayDetails(dateString) {
            const dayWalks = AppState.walks.filter(walk => walk.date === dateString);
            if (dayWalks.length > 0) {
                const walkDetails = dayWalks.map(walk =>
                    `${walk.time} - ${walk.distance}km, ${walk.duration}min`
                ).join('\n');
                alert(`Spazierg√§nge am ${formatDate(dateString)}:\n\n${walkDetails}`);
            } else {
                alert(`Keine Spazierg√§nge am ${formatDate(dateString)}`);
            }
        }

        // Training-Funktionen
        function addSkill() {
            const skillName = document.getElementById('newSkill').value.trim();
            if (!skillName) {
                alert('Bitte gib einen Namen f√ºr die F√§higkeit ein.');
                return;
            }

            const skill = {
                id: generateId(),
                name: skillName,
                progress: 0,
                notes: 'Neu hinzugef√ºgt'
            };

            AppState.skills.push(skill);
            saveData();
            updateSkills();

            document.getElementById('newSkill').value = '';
        }

        function updateSkills() {
            const container = document.getElementById('skillsList');
            container.innerHTML = AppState.skills.map(skill => `
                <div class="walk-entry">
                    <h4>${skill.name}</h4>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${skill.progress}%"></div>
                    </div>
                    <p>${skill.progress}% - ${skill.notes}</p>
                    <button class="btn" onclick="updateProgress(this, '${skill.id}')">üìà Fortschritt aktualisieren</button>
                    <button class="btn delete" onclick="deleteSkill('${skill.id}')">üóëÔ∏è L√∂schen</button>
                </div>
            `).join('');
        }

        function updateProgress(button, skillId) {
            currentSkillId = skillId;
            const skill = AppState.skills.find(s => s.id === skillId);

            document.getElementById('progressValue').value = skill.progress;
            document.getElementById('progressDisplay').textContent = skill.progress + '%';
            document.getElementById('progressNote').value = skill.notes;

            document.getElementById('progressModal').style.display = 'block';
        }

        function deleteSkill(skillId) {
            if (confirm('M√∂chtest du diese F√§higkeit wirklich l√∂schen?')) {
                AppState.skills = AppState.skills.filter(skill => skill.id !== skillId);
                saveData();
                updateSkills();
            }
        }

        function saveProgress() {
            if (!currentSkillId) return;

            const skill = AppState.skills.find(s => s.id === currentSkillId);
            if (skill) {
                skill.progress = parseInt(document.getElementById('progressValue').value);
                skill.notes = document.getElementById('progressNote').value || 'Kein Kommentar';

                saveData();
                updateSkills();
            }

            closeModal();
        }

        function closeModal() {
            document.getElementById('progressModal').style.display = 'none';
            currentSkillId = null;
        }

        // Training Notes
        function saveTrainingNotes() {
            AppState.trainingNotes = document.getElementById('trainingNotes').value;
            localStorage.setItem('gassi-training-notes', AppState.trainingNotes);
            alert('üìù Trainingsnotizen gespeichert!');
        }

        function loadTrainingNotes() {
            document.getElementById('trainingNotes').value = AppState.trainingNotes;
        }

        // Erinnerungen-Funktionen
        function addMemory() {
            const title = document.getElementById('memoryTitle').value.trim();
            const date = document.getElementById('memoryDate').value;
            const description = document.getElementById('memoryDescription').value.trim();

            if (!title || !date || !description) {
                alert('Bitte f√ºlle alle Felder aus.');
                return;
            }

            const memory = {
                id: Date.now(),
                title,
                date,
                description
            };

            AppState.memories.unshift(memory);
            saveData();
            updateMemories();

            // Formular zur√ºcksetzen
            document.getElementById('memoryTitle').value = '';
            document.getElementById('memoryDate').value = formatDateForInput(new Date());
            document.getElementById('memoryDescription').value = '';

            alert('üì∏ Erinnerung gespeichert!');
        }

        function updateMemories() {
            const container = document.getElementById('memoriesList');

            if (AppState.memories.length === 0) {
                container.innerHTML = '<p>Noch keine Erinnerungen gespeichert. F√ºge deine erste Erinnerung hinzu!</p>';
                return;
            }

            container.innerHTML = AppState.memories.map(memory => `
                <div class="walk-entry">
                    <h4>${memory.title}</h4>
                    <small>${formatDate(memory.date)}</small>
                    <button class="btn delete" onclick="deleteMemory(${memory.id})">üóëÔ∏è L√∂schen</button>
                    <p>${memory.description}</p>
                </div>
            `).join('');
        }

        function deleteMemory(memoryId) {
            if (confirm('M√∂chtest du diese Erinnerung wirklich l√∂schen?')) {
                AppState.memories = AppState.memories.filter(memory => memory.id !== memoryId);
                saveData();
                updateMemories();
            }
        }

        // Modal schlie√üen wenn au√üerhalb geklickt wird
        window.onclick = function(event) {
            const modal = document.getElementById('progressModal');
            if (event.target === modal) {
                closeModal();
            }
        };

        // Service Worker f√ºr Offline-Funktionalit√§t (optional)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                // Service Worker w√ºrde hier registriert werden
                console.log('Gassi-App bereit! üêï');
            });
        }
    </script>
</body>
</html>